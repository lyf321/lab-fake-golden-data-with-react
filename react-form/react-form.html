<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>Title</title>
    <script src="../build/react.js"></script>
    <script src="../build/react-dom.js"></script>
    <script src="../build/browser.min.js"></script>
</head>
<style>
    .right {
        float: left;
    }
</style>
<body>
<div id="example"></div>
<script type="text/babel">

    const Middle = React.createClass({
        render(){
            return (<div>
                        {this.props.count.map((Text, Index) => {
                            return <Item index={Index} text={Text}
                                         deleted={this.props.deleted.bind(this)}/>
                        })}
                    </div>
            )
        }
    });

    const Item = React.createClass({
        handelDelete(){
            this.props.deleted(this.props.index);
        },
        render(){
            if (this.props.text === 'text') {
                return <div>
                    <input type="input"/>
                    <input type="button" onClick={this.handelDelete.bind(this)} value="X"/><br/>
                </div>
            } else {
                return <div>
                    <input type="date"/>
                    <input type="button" onClick={this.handelDelete.bind(this)} value="X"/><br/>
                </div>
            }
        }
    });

    const App = React.createClass({
        getInitialState(){
            return {count: [], states: true}
        },
        handelClickedText(e){
            this.state.count.push('text');
            this.setState({count: this.state.count})
        },
        handelClickedDate(e){
            this.state.count.push('date');
            this.setState({count: this.state.count})
        },
        deleted(index){
            this.state.count.splice(index, 1);
            this.setState({count: this.state.count})
        },
        changeState(){
            this.setState({states: !this.state.states})
        },
        render(){
            if (this.state.states === true) {

               return <div className="right">
                    <input type="button" onClick={this.changeState.bind(this)} value="预览"/>
                    <input type="button" onClick={this.handelClickedText.bind(this)} value="文本框"></input>
                    <input type="button" onClick={this.handelClickedDate.bind(this)} value="日期框"></input>
                    <Middle count={this.state.count} deleted={this.deleted.bind(this)}/>
                </div>
            }
        }
    });
    ReactDOM.render(
            <App/>
            , document.getElementById('example'));
</script>
</body>
</html>